{"ast":null,"code":"import { database } from \"./firebase.js\";\nimport { ref, get } from \"firebase/database\";\nimport { auth } from \"./firebase.js\";\nfunction parseCustomTimestamp(timestampStr) {\n  const [datePart, timePart] = timestampStr.split(' ');\n  if (!datePart || !timePart) return new Date('invalid');\n  const [day, month, year] = datePart.split('-').map(Number);\n  const [hours, minutes, seconds] = timePart.split(':').map(Number);\n  return new Date(year, month - 1, day, hours, minutes, seconds);\n}\nexport const fetchFoundItems = async () => {\n  try {\n    const foundRef = ref(database, \"found\");\n    const snapshot = await get(foundRef);\n    if (!snapshot.exists()) {\n      console.log(\"No found items found.\");\n      return [];\n    }\n    const currentUser = auth.currentUser;\n    if (!currentUser) {\n      console.error(\"No user is logged in.\");\n      return [];\n    }\n    const currentUserId = currentUser.uid;\n    let foundItems = [];\n    snapshot.forEach(userSnapshot => {\n      if (userSnapshot.key !== currentUserId) {\n        userSnapshot.forEach(itemSnapshot => {\n          foundItems.push({\n            id: itemSnapshot.key,\n            ...itemSnapshot.val()\n          });\n        });\n      }\n    });\n    foundItems.sort((a, b) => {\n      const timeA = parseCustomTimestamp(a.timestamp).getTime();\n      const timeB = parseCustomTimestamp(b.timestamp).getTime();\n      return timeB - timeA;\n    });\n    return foundItems;\n  } catch (error) {\n    console.error(\"Error fetching found items:\", error);\n    return [];\n  }\n};","map":{"version":3,"names":["database","ref","get","auth","parseCustomTimestamp","timestampStr","datePart","timePart","split","Date","day","month","year","map","Number","hours","minutes","seconds","fetchFoundItems","foundRef","snapshot","exists","console","log","currentUser","error","currentUserId","uid","foundItems","forEach","userSnapshot","key","itemSnapshot","push","id","val","sort","a","b","timeA","timestamp","getTime","timeB"],"sources":["E:/Btech 4th sem/mini project/Mini project/src/Components/found.js"],"sourcesContent":["import { database } from \"./firebase.js\";\r\nimport { ref, get } from \"firebase/database\";\r\nimport { auth } from \"./firebase.js\"; \r\n\r\nfunction parseCustomTimestamp(timestampStr) {\r\n  const [datePart, timePart] = timestampStr.split(' ');\r\n  if (!datePart || !timePart) return new Date('invalid');\r\n  const [day, month, year] = datePart.split('-').map(Number);\r\n  const [hours, minutes, seconds] = timePart.split(':').map(Number);\r\n  return new Date(year, month - 1, day, hours, minutes, seconds);\r\n}\r\n\r\nexport const fetchFoundItems = async () => {\r\n  try \r\n  {\r\n    const foundRef = ref(database, \"found\");\r\n    const snapshot = await get(foundRef);\r\n    \r\n    if (!snapshot.exists()) \r\n    {\r\n      console.log(\"No found items found.\");\r\n      return [];\r\n    }\r\n\r\n\r\n    const currentUser = auth.currentUser;\r\n    if (!currentUser) \r\n    {\r\n      console.error(\"No user is logged in.\");\r\n      return [];\r\n    }\r\n    const currentUserId = currentUser.uid;\r\n\r\n    let foundItems = [];\r\n    snapshot.forEach((userSnapshot) => {\r\n      if (userSnapshot.key !== currentUserId) { \r\n        userSnapshot.forEach((itemSnapshot) => {\r\n          foundItems.push({\r\n            id: itemSnapshot.key,\r\n            ...itemSnapshot.val(),\r\n          });\r\n        });\r\n      }\r\n    });\r\n\r\n\r\n    foundItems.sort((a, b) => {\r\n      const timeA = parseCustomTimestamp(a.timestamp).getTime();\r\n      const timeB = parseCustomTimestamp(b.timestamp).getTime();\r\n      return timeB - timeA;\r\n    });\r\n\r\n    return foundItems;\r\n  } \r\n  catch (error) \r\n  {\r\n    console.error(\"Error fetching found items:\", error);\r\n    return [];\r\n    \r\n  }\r\n};\r\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,eAAe;AACxC,SAASC,GAAG,EAAEC,GAAG,QAAQ,mBAAmB;AAC5C,SAASC,IAAI,QAAQ,eAAe;AAEpC,SAASC,oBAAoBA,CAACC,YAAY,EAAE;EAC1C,MAAM,CAACC,QAAQ,EAAEC,QAAQ,CAAC,GAAGF,YAAY,CAACG,KAAK,CAAC,GAAG,CAAC;EACpD,IAAI,CAACF,QAAQ,IAAI,CAACC,QAAQ,EAAE,OAAO,IAAIE,IAAI,CAAC,SAAS,CAAC;EACtD,MAAM,CAACC,GAAG,EAAEC,KAAK,EAAEC,IAAI,CAAC,GAAGN,QAAQ,CAACE,KAAK,CAAC,GAAG,CAAC,CAACK,GAAG,CAACC,MAAM,CAAC;EAC1D,MAAM,CAACC,KAAK,EAAEC,OAAO,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CAACK,GAAG,CAACC,MAAM,CAAC;EACjE,OAAO,IAAIL,IAAI,CAACG,IAAI,EAAED,KAAK,GAAG,CAAC,EAAED,GAAG,EAAEK,KAAK,EAAEC,OAAO,EAAEC,OAAO,CAAC;AAChE;AAEA,OAAO,MAAMC,eAAe,GAAG,MAAAA,CAAA,KAAY;EACzC,IACA;IACE,MAAMC,QAAQ,GAAGlB,GAAG,CAACD,QAAQ,EAAE,OAAO,CAAC;IACvC,MAAMoB,QAAQ,GAAG,MAAMlB,GAAG,CAACiB,QAAQ,CAAC;IAEpC,IAAI,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,EACtB;MACEC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;MACpC,OAAO,EAAE;IACX;IAGA,MAAMC,WAAW,GAAGrB,IAAI,CAACqB,WAAW;IACpC,IAAI,CAACA,WAAW,EAChB;MACEF,OAAO,CAACG,KAAK,CAAC,uBAAuB,CAAC;MACtC,OAAO,EAAE;IACX;IACA,MAAMC,aAAa,GAAGF,WAAW,CAACG,GAAG;IAErC,IAAIC,UAAU,GAAG,EAAE;IACnBR,QAAQ,CAACS,OAAO,CAAEC,YAAY,IAAK;MACjC,IAAIA,YAAY,CAACC,GAAG,KAAKL,aAAa,EAAE;QACtCI,YAAY,CAACD,OAAO,CAAEG,YAAY,IAAK;UACrCJ,UAAU,CAACK,IAAI,CAAC;YACdC,EAAE,EAAEF,YAAY,CAACD,GAAG;YACpB,GAAGC,YAAY,CAACG,GAAG,CAAC;UACtB,CAAC,CAAC;QACJ,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IAGFP,UAAU,CAACQ,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;MACxB,MAAMC,KAAK,GAAGnC,oBAAoB,CAACiC,CAAC,CAACG,SAAS,CAAC,CAACC,OAAO,CAAC,CAAC;MACzD,MAAMC,KAAK,GAAGtC,oBAAoB,CAACkC,CAAC,CAACE,SAAS,CAAC,CAACC,OAAO,CAAC,CAAC;MACzD,OAAOC,KAAK,GAAGH,KAAK;IACtB,CAAC,CAAC;IAEF,OAAOX,UAAU;EACnB,CAAC,CACD,OAAOH,KAAK,EACZ;IACEH,OAAO,CAACG,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;IACnD,OAAO,EAAE;EAEX;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}